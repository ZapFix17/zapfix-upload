<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Watch Video - ZapFix</title>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: #E0F3FF;
      margin: 0;
      padding: 0;
      color: #333;
    }

    header {
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 15px 25px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .logo {
      font-size: 26px;
      font-weight: 700;
      color: #0077ff;
      cursor: pointer;
    }

    .back-btn {
      background: #0077ff;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 14px;
      transition: background 0.2s;
    }

    .back-btn:hover {
      background: #005cd1;
    }

    main {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 30px;
      gap: 20px;
    }

    video {
      width: 100%;
      max-width: 800px;
      border-radius: 16px;
      background: #000;
    }

    .info {
      background: white;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      width: 100%;
      max-width: 800px;
    }

    h2 {
      color: #0077ff;
      margin: 0 0 8px 0;
    }

    p {
      color: #444;
      line-height: 1.5;
    }

    .actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 15px;
    }

    .like-btn {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      font-size: 18px;
      color: #0077ff;
      user-select: none;
    }

    .like-btn span {
      font-size: 15px;
      color: #333;
    }

    .share-btn {
      background: #00b894;
      color: white;
      border: none;
      border-radius: 10px;
      padding: 8px 14px;
      cursor: pointer;
      font-size: 14px;
    }

    .share-drawer {
      display: none;
      background: white;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      border-radius: 12px;
      padding: 15px;
      margin-top: 10px;
    }

    .share-drawer button {
      background: #0077ff;
      color: white;
      border: none;
      padding: 8px 10px;
      border-radius: 8px;
      margin-right: 10px;
      cursor: pointer;
    }

    .comments {
      background: white;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      width: 100%;
      max-width: 800px;
    }

    .comments h3 {
      color: #0077ff;
      margin-bottom: 10px;
    }

    .comments input {
      width: 100%;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      margin-bottom: 10px;
      font-size: 14px;
      outline: none;
    }

    .comments button {
      background: #0077ff;
      color: white;
      border: none;
      padding: 8px 14px;
      border-radius: 8px;
      cursor: pointer;
    }

    .comment-list {
      margin-top: 15px;
    }

    .comment {
      background: #f2f4f8;
      padding: 8px 12px;
      border-radius: 8px;
      margin-bottom: 8px;
      font-size: 14px;
    }

    @media (max-width: 600px) {
      main {
        padding: 15px;
      }
      video {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo" onclick="window.location.href='feed.html'">ZAPFIX</div>
    <button class="back-btn" onclick="window.location.href='feed.html'">‚Üê Back</button>
  </header>

  <main>
    <video id="videoPlayer" controls></video>

    <div class="info">
      <h2 id="videoTitle">Video Title</h2>
      <p id="videoDescription">Video description...</p>

      <div class="actions">
        <div class="like-btn" id="likeBtn">üëç <span id="likeCount">0</span></div>
        <button class="share-btn" onclick="toggleShare()">Share üì§</button>
      </div>

      <div class="share-drawer" id="shareDrawer">
        <button onclick="copyLink()">Copy Link</button>
        <button onclick="shareWhatsApp()">Share on WhatsApp</button>
      </div>
    </div>

    <div class="comments">
      <h3>Comments üí¨</h3>
      <input type="text" id="commentInput" placeholder="Write a comment...">
      <button onclick="addComment()">Post</button>
      <div class="comment-list" id="commentList"></div>
    </div>
  </main>

  <script>
    const videoData = JSON.parse(localStorage.getItem("selectedVideo") || "{}");
    const videoPlayer = document.getElementById("videoPlayer");
    const videoTitle = document.getElementById("videoTitle");
    const videoDescription = document.getElementById("videoDescription");
    const likeBtn = document.getElementById("likeBtn");
    const likeCount = document.getElementById("likeCount");
    const commentList = document.getElementById("commentList");

    // Load video
    if (videoData.video) {
      videoPlayer.src = videoData.video;
      videoTitle.textContent = videoData.title;
      videoDescription.textContent = videoData.description;
    }

    // üëç Like System (Permanent)
    const likeKey = `likes_${videoData.video}`;
    let likes = parseInt(localStorage.getItem(likeKey) || "0");
    likeCount.textContent = likes;

    likeBtn.addEventListener("click", () => {
      likes++;
      likeCount.textContent = likes;
      localStorage.setItem(likeKey, likes);
    });

    // üí¨ Comment System (Permanent)
    const commentKey = `comments_${videoData.video}`;
    let comments = JSON.parse(localStorage.getItem(commentKey) || "[]");
    displayComments();

    function addComment() {
      const input = document.getElementById("commentInput");
      const text = input.value.trim();
      if (!text) return;
      comments.push(text);
      localStorage.setItem(commentKey, JSON.stringify(comments));
      input.value = "";
      displayComments();
    }

    function displayComments() {
      commentList.innerHTML = "";
      comments.forEach(c => {
        const div = document.createElement("div");
        div.classList.add("comment");
        div.textContent = c;
        commentList.appendChild(div);
      });
    }

    // üì§ Share Drawer
    function toggleShare() {
      const drawer = document.getElementById("shareDrawer");
      drawer.style.display = drawer.style.display === "block" ? "none" : "block";
    }

    function copyLink() {
      const link = window.location.href;
      navigator.clipboard.writeText(link);
      alert("Link copied to clipboard!");
    }

    function shareWhatsApp() {
      const link = window.location.href;
      window.open(`https://api.whatsapp.com/send?text=Check this ZapFix video: ${link}`);
    }
  </script>
</body>
</html>
